{% extends "admin/base.html" %}

{% block title %}Ø§Ù„ØªÙ‚Ø§Ø±ÙŠØ± Ø§Ù„Ù…ØªÙ‚Ø¯Ù…Ø© - Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…{% endblock %}

{% block content %}
<!-- Ø±Ø£Ø³ Ø§Ù„ØµÙØ­Ø© -->
<div class="content-card">
    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
        <h2 style="color: #ff0033; margin: 0;">
            <i class="fas fa-chart-line"></i>
            Ù„ÙˆØ­Ø© Ø§Ù„ØªÙ‚Ø§Ø±ÙŠØ± Ø§Ù„Ù…ØªÙ‚Ø¯Ù…Ø© (Ø±Ø¨Ø· Ù…Ø¨Ø§Ø´Ø± Ù…Ø¹ Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª)
        </h2>
        <div style="display: flex; gap: 10px;">
            <button class="btn btn-success btn-sm" onclick="exportToPDF()">
                <i class="fas fa-file-pdf"></i>
                ØªØµØ¯ÙŠØ± PDF
            </button>
            <button class="btn btn-warning btn-sm" onclick="exportToExcel()">
                <i class="fas fa-file-excel"></i>
                ØªØµØ¯ÙŠØ± Excel
            </button>
            <button class="btn btn-info btn-sm" onclick="printReport()">
                <i class="fas fa-print"></i>
                Ø·Ø¨Ø§Ø¹Ø©
            </button>
        </div>
    </div>
    <div style="color: #ccc; font-size: 0.9em; text-align: left;">
        Ø¢Ø®Ø± ØªØ­Ø¯ÙŠØ«: {{ now.strftime('%Y-%m-%d %H:%M') }}
        <br>
        <small style="color: #ff6666;">Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ø±Ø¨ÙˆØ·Ø© Ù…Ø¨Ø§Ø´Ø±Ø© Ù…Ø¹ Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª ğŸ”„</small>
    </div>
</div>

<!-- Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø§Ù„Ù…Ø§Ù„ÙŠØ© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© -->
<div class="stats-grid">
    <div class="stat-card success">
        <div class="stat-icon">
            <i class="fas fa-dollar-sign"></i>
        </div>
        <div class="stat-number">{{ "{:,.2f}".format(total_revenue) }}</div>
        <div class="stat-label">Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø¥ÙŠØ±Ø§Ø¯Ø§Øª (Ø±.Ø³)</div>
        <div class="stat-growth">+{{ "{:.1f}".format((total_revenue / 10000) * 100) }}%</div>
    </div>

    <div class="stat-card info">
        <div class="stat-icon">
            <i class="fas fa-shopping-cart"></i>
        </div>
        <div class="stat-number">{{ "{:,}".format(total_orders) }}</div>
        <div class="stat-label">Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø·Ù„Ø¨Ø§Øª</div>
        <div class="stat-subtext">{{ "{:,}".format(completed_orders) }} Ù…ÙƒØªÙ…Ù„Ø©</div>
    </div>

    <div class="stat-card warning">
        <div class="stat-icon">
            <i class="fas fa-users"></i>
        </div>
        <div class="stat-number">{{ "{:,}".format(total_users) }}</div>
        <div class="stat-label">Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡</div>
        <div class="stat-subtext">{{ "{:,}".format(kyc_users) }} Ù…ÙˆØ«Ù‚ÙˆÙ†</div>
    </div>

    <div class="stat-card danger">
        <div class="stat-icon">
            <i class="fas fa-boxes"></i>
        </div>
        <div class="stat-number">{{ "{:,}".format(active_products) }}</div>
        <div class="stat-label">Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª Ø§Ù„Ù†Ø´Ø·Ø©</div>
        <div class="stat-subtext">{{ "{:,}".format(available_codes) }} ÙƒÙˆØ¯ Ù…ØªØ§Ø­</div>
    </div>
</div>

<!-- Ø§Ù„Ø±Ø³ÙˆÙ… Ø§Ù„Ø¨ÙŠØ§Ù†ÙŠØ© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© -->
<div class="content-card">
    <h2 style="color: #ff0033; margin-bottom: 30px;">
        <i class="fas fa-chart-bar"></i>
        Ø§Ù„ØªØ­Ù„ÙŠÙ„Ø§Øª Ø§Ù„Ù…ØªÙ‚Ø¯Ù…Ø© Ù„Ù„Ø¨ÙŠØ§Ù†Ø§Øª
    </h2>
    
    <!-- Ø§Ù„ØµÙ Ø§Ù„Ø£ÙˆÙ„: Ø§Ù„Ø¥ÙŠØ±Ø§Ø¯Ø§Øª ÙˆØ§Ù„Ø·Ù„Ø¨Ø§Øª -->
    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 30px; margin-bottom: 30px;">
        <div class="chart-container">
            <h3 class="chart-title">
                <i class="fas fa-chart-line"></i>
                Ø§Ù„Ø¥ÙŠØ±Ø§Ø¯Ø§Øª Ø§Ù„Ø´Ù‡Ø±ÙŠØ© ({{ monthly_data|length }} Ø´Ù‡Ø±)
            </h3>
            <canvas id="monthlyRevenueChart"></canvas>
        </div>
        
        <div class="chart-container">
            <h3 class="chart-title">
                <i class="fas fa-shopping-cart"></i>
                Ø§Ù„Ø·Ù„Ø¨Ø§Øª Ø§Ù„ÙŠÙˆÙ…ÙŠØ© (Ø£Ø³Ø¨ÙˆØ¹)
            </h3>
            <canvas id="dailyOrdersChart"></canvas>
        </div>
    </div>
    
    <!-- Ø§Ù„ØµÙ Ø§Ù„Ø«Ø§Ù†ÙŠ: Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª ÙˆØ§Ù„Ø¹Ù…Ù„Ø§Ø¡ -->
    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 30px; margin-bottom: 30px;">
        <div class="chart-container">
            <h3 class="chart-title">
                <i class="fas fa-star"></i>
                Ø£ÙØ¶Ù„ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª Ù…Ø¨ÙŠØ¹Ø§Ù‹
            </h3>
            <canvas id="topProductsChart"></canvas>
        </div>
        
        <div class="chart-container">
            <h3 class="chart-title">
                <i class="fas fa-users-cog"></i>
                Ø£Ø¯Ø§Ø¡ Ø£Ù†ÙˆØ§Ø¹ Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡
            </h3>
            <canvas id="customerTypesChart"></canvas>
        </div>
    </div>
    
    <!-- Ø§Ù„ØµÙ Ø§Ù„Ø«Ø§Ù„Ø«: Ø§Ù„ÙØ¦Ø§Øª ÙˆØ¨ÙˆØ§Ø¨Ø§Øª Ø§Ù„Ø¯ÙØ¹ -->
    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 30px; margin-bottom: 30px;">
        <div class="chart-container">
            <h3 class="chart-title">
                <i class="fas fa-tags"></i>
                Ø£Ø¯Ø§Ø¡ Ø§Ù„ÙØ¦Ø§Øª
            </h3>
            <canvas id="categoriesChart"></canvas>
        </div>
        
        <div class="chart-container">
            <h3 class="chart-title">
                <i class="fas fa-credit-card"></i>
                Ø£Ø¯Ø§Ø¡ Ø¨ÙˆØ§Ø¨Ø§Øª Ø§Ù„Ø¯ÙØ¹
            </h3>
            <canvas id="paymentGatewaysChart"></canvas>
        </div>
    </div>
    
    <!-- Ø§Ù„ØµÙ Ø§Ù„Ø±Ø§Ø¨Ø¹: Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø§Ù„Ù†Ø¸Ø§Ù… -->
    <div style="display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 20px; margin-bottom: 30px;">
        <div class="chart-container-small">
            <h4 class="chart-title-small">
                <i class="fas fa-check-circle"></i>
                Ø­Ø§Ù„Ø§Øª KYC
            </h4>
            <canvas id="kycStatusChart"></canvas>
        </div>
        
        <div class="chart-container-small">
            <h4 class="chart-title-small">
                <i class="fas fa-box"></i>
                Ø­Ø§Ù„Ø© Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª
            </h4>
            <canvas id="productsStatusChart"></canvas>
        </div>
        
        <div class="chart-container-small">
            <h4 class="chart-title-small">
                <i class="fas fa-code"></i>
                Ø§Ù„Ø£ÙƒÙˆØ§Ø¯ Ø§Ù„Ù…ØªØ§Ø­Ø©
            </h4>
            <canvas id="codesStatusChart"></canvas>
        </div>
    </div>
</div>

<!-- Ø¬Ø¯Ø§ÙˆÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„ØªÙØµÙŠÙ„ÙŠØ© -->
<div class="content-card">
    <h2 style="color: #ff0033; margin-bottom: 20px;">
        <i class="fas fa-table"></i>
        Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„ØªÙØµÙŠÙ„ÙŠØ©
    </h2>
    
    <!-- Ø¬Ø¯ÙˆÙ„ Ø£ÙØ¶Ù„ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª -->
    <div style="margin-bottom: 30px;">
        <h3 style="color: #28a745; margin-bottom: 15px;">
            <i class="fas fa-star"></i>
            Ø£ÙØ¶Ù„ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª Ù…Ø¨ÙŠØ¹Ø§Ù‹
        </h3>
        <div class="table-container">
            <table class="data-table">
                <thead>
                    <tr>
                        <th>Ø§Ù„ØªØ±ØªÙŠØ¨</th>
                        <th>Ø§Ø³Ù… Ø§Ù„Ù…Ù†ØªØ¬</th>
                        <th>Ø§Ù„Ø³Ø¹Ø± (Ø±.Ø³)</th>
                        <th>Ø¹Ø¯Ø¯ Ø§Ù„Ù…Ø¨ÙŠØ¹Ø§Øª</th>
                        <th>Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø¥ÙŠØ±Ø§Ø¯Ø§Øª (Ø±.Ø³)</th>
                        <th>Ù…ØªÙˆØ³Ø· Ø§Ù„Ø±Ø¨Ø­</th>
                    </tr>
                </thead>
                <tbody>
                    {% for product in top_products %}
                    <tr>
                        <td>
                            <span class="rank-badge rank-{{ loop.index }}">{{ loop.index }}</span>
                        </td>
                        <td>{{ product.name }}</td>
                        <td>{{ "{:,.2f}".format(product.price) }}</td>
                        <td>{{ "{:,}".format(product.total_sold) }}</td>
                        <td>{{ "{:,.2f}".format(product.total_revenue) }}</td>
                        <td>{{ "{:,.2f}".format(product.total_revenue / product.total_sold) }}</td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </div>
    
    <!-- Ø¬Ø¯ÙˆÙ„ Ø£Ø¯Ø§Ø¡ Ø§Ù„ÙØ¦Ø§Øª -->
    <div style="margin-bottom: 30px;">
        <h3 style="color: #17a2b8; margin-bottom: 15px;">
            <i class="fas fa-tags"></i>
            Ø£Ø¯Ø§Ø¡ Ø§Ù„ÙØ¦Ø§Øª
        </h3>
        <div class="table-container">
            <table class="data-table">
                <thead>
                    <tr>
                        <th>Ø§Ø³Ù… Ø§Ù„ÙØ¦Ø©</th>
                        <th>Ø¹Ø¯Ø¯ Ø§Ù„Ù…Ø¨ÙŠØ¹Ø§Øª</th>
                        <th>Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø¥ÙŠØ±Ø§Ø¯Ø§Øª (Ø±.Ø³)</th>
                        <th>Ù…ØªÙˆØ³Ø· Ø§Ù„Ø³Ø¹Ø± (Ø±.Ø³)</th>
                        <th>Ø§Ù„Ù†Ø³Ø¨Ø© Ù…Ù† Ø§Ù„Ø¥ÙŠØ±Ø§Ø¯Ø§Øª</th>
                    </tr>
                </thead>
                <tbody>
                    {% for category in categories_performance %}
                    <tr>
                        <td>{{ category.name }}</td>
                        <td>{{ "{:,}".format(category.total_sold) }}</td>
                        <td>{{ "{:,.2f}".format(category.total_revenue) }}</td>
                        <td>{{ "{:,.2f}".format(category.total_revenue / category.total_sold) }}</td>
                        <td>
                            {% if total_revenue > 0 %}
                                {{ "{:.1f}".format((category.total_revenue / total_revenue) * 100) }}%
                            {% else %}
                                0%
                            {% endif %}
                        </td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </div>
    
    <!-- Ø¬Ø¯ÙˆÙ„ Ø£Ø¯Ø§Ø¡ Ø¨ÙˆØ§Ø¨Ø§Øª Ø§Ù„Ø¯ÙØ¹ -->
    <div style="margin-bottom: 30px;">
        <h3 style="color: #ffc107; margin-bottom: 15px;">
            <i class="fas fa-credit-card"></i>
            Ø£Ø¯Ø§Ø¡ Ø¨ÙˆØ§Ø¨Ø§Øª Ø§Ù„Ø¯ÙØ¹
        </h3>
        <div class="table-container">
            <table class="data-table">
                <thead>
                    <tr>
                        <th>Ø¨ÙˆØ§Ø¨Ø© Ø§Ù„Ø¯ÙØ¹</th>
                        <th>Ø¹Ø¯Ø¯ Ø§Ù„Ø·Ù„Ø¨Ø§Øª</th>
                        <th>Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø¥ÙŠØ±Ø§Ø¯Ø§Øª (Ø±.Ø³)</th>
                        <th>Ù…ØªÙˆØ³Ø· Ù‚ÙŠÙ…Ø© Ø§Ù„Ø·Ù„Ø¨ (Ø±.Ø³)</th>
                        <th>Ø§Ù„Ù†Ø³Ø¨Ø© Ù…Ù† Ø§Ù„Ø·Ù„Ø¨Ø§Øª</th>
                    </tr>
                </thead>
                <tbody>
                    {% for gateway in payment_gateways_performance %}
                    <tr>
                        <td>{{ gateway.gateway_name }}</td>
                        <td>{{ "{:,}".format(gateway.total_orders) }}</td>
                        <td>{{ "{:,.2f}".format(gateway.total_revenue) }}</td>
                        <td>{{ "{:,.2f}".format(gateway.avg_order_value) }}</td>
                        <td>
                            {% if total_orders > 0 %}
                                {{ "{:.1f}".format((gateway.total_orders / total_orders) * 100) }}%
                            {% else %}
                                0%
                            {% endif %}
                        </td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </div>
</div>

<!-- Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø§Ù„Ù†Ø¸Ø§Ù… Ø§Ù„Ø´Ø§Ù…Ù„Ø© -->
<div class="content-card">
    <h2 style="color: #ff0033; margin-bottom: 20px;">
        <i class="fas fa-database"></i>
        Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø§Ù„Ù†Ø¸Ø§Ù… Ø§Ù„Ø´Ø§Ù…Ù„Ø©
    </h2>
    
    <div style="display: grid; grid-template-columns: 1fr 1fr 1fr 1fr; gap: 20px;">
        <!-- Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ† ÙˆKYC -->
        <div class="system-stats-card">
            <h4><i class="fas fa-users"></i> Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†</h4>
            <ul>
                <li>Ø¥Ø¬Ù…Ø§Ù„ÙŠ: {{ "{:,}".format(total_users) }}</li>
                <li>Ø¹Ø§Ø¯ÙŠÙˆÙ†: {{ "{:,}".format(regular_users) }}</li>
                <li>Ù…ÙˆØ«Ù‚ÙˆÙ†: {{ "{:,}".format(kyc_users) }}</li>
                <li>Ù…ÙˆØ²Ø¹ÙˆÙ†: {{ "{:,}".format(reseller_users) }}</li>
                <li>Ø·Ù„Ø¨Ø§Øª KYC Ù…Ø¹Ù„Ù‚Ø©: {{ "{:,}".format(kyc_pending) }}</li>
            </ul>
        </div>
        
        <!-- Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª ÙˆØ§Ù„Ø£ÙƒÙˆØ§Ø¯ -->
        <div class="system-stats-card">
            <h4><i class="fas fa-box"></i> Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª</h4>
            <ul>
                <li>Ù…Ù†ØªØ¬Ø§Øª Ù†Ø´Ø·Ø©: {{ "{:,}".format(active_products) }}</li>
                <li>Ù…Ù†ØªØ¬Ø§Øª ØºÙŠØ± Ù†Ø´Ø·Ø©: {{ "{:,}".format(inactive_products) }}</li>
                <li>Ø£ÙƒÙˆØ§Ø¯ Ù…ØªØ§Ø­Ø©: {{ "{:,}".format(available_codes) }}</li>
                <li>Ø£ÙƒÙˆØ§Ø¯ Ù…Ø³ØªØ®Ø¯Ù…Ø©: {{ "{:,}".format(used_codes) }}</li>
            </ul>
        </div>
        
        <!-- Ø§Ù„ÙØ¦Ø§Øª ÙˆØ§Ù„Ø¹Ø±ÙˆØ¶ -->
        <div class="system-stats-card">
            <h4><i class="fas fa-tags"></i> Ø§Ù„Ù…Ø­ØªÙˆÙ‰</h4>
            <ul>
                <li>Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„ÙØ¦Ø§Øª: {{ "{:,}".format(total_categories) }}</li>
                <li>Ø§Ù„ÙØ¦Ø§Øª Ø§Ù„ÙØ±Ø¹ÙŠØ©: {{ "{:,}".format(total_subcategories) }}</li>
                <li>Ø§Ù„Ø¹Ø±ÙˆØ¶ Ø§Ù„Ù†Ø´Ø·Ø©: {{ "{:,}".format(active_offers) }}</li>
                <li>Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø¹Ø±ÙˆØ¶: {{ "{:,}".format(total_offers) }}</li>
                <li>Ø§Ù„Ù…Ù‚Ø§Ù„Ø§Øª Ø§Ù„Ù…Ù†Ø´ÙˆØ±Ø©: {{ "{:,}".format(published_articles) }}</li>
            </ul>
        </div>
        
        <!-- Ø§Ù„Ù†Ø¸Ø§Ù… ÙˆØ§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª -->
        <div class="system-stats-card">
            <h4><i class="fas fa-cogs"></i> Ø§Ù„Ù†Ø¸Ø§Ù…</h4>
            <ul>
                <li>Ø§Ù„Ø¹Ù…Ù„Ø§Øª Ø§Ù„Ù†Ø´Ø·Ø©: {{ "{:,}".format(active_currencies) }}</li>
                <li>Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø¹Ù…Ù„Ø§Øª: {{ "{:,}".format(total_currencies) }}</li>
                <li>Ø¨ÙˆØ§Ø¨Ø§Øª Ø¯ÙØ¹ Ù†Ø´Ø·Ø©: {{ "{:,}".format(active_gateways) }}</li>
                <li>Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø¨ÙˆØ§Ø¨Ø§Øª Ø§Ù„Ø¯ÙØ¹: {{ "{:,}".format(total_gateways) }}</li>
            </ul>
        </div>
    </div>
</div>
{% endblock %}

{% block scripts %}
<!-- Chart.js Library -->
<script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.min.js"></script>

<script>
// Ø§Ù„ØªØ£ÙƒØ¯ Ù…Ù† ØªØ­Ù…ÙŠÙ„ Chart.js ÙˆØªÙ‡ÙŠØ¦Ø© Ø§Ù„Ø±Ø³ÙˆÙ… Ø§Ù„Ø¨ÙŠØ§Ù†ÙŠØ©
document.addEventListener('DOMContentLoaded', function() {
    console.log('ğŸš€ Ø¨Ø¯Ø¡ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø±Ø³ÙˆÙ… Ø§Ù„Ø¨ÙŠØ§Ù†ÙŠØ©...');
    
    // Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ù† Ø§Ù„Ø®Ø§Ø¯Ù…
    const chartData = {{ chart_data | tojson | safe }};
    console.log('ğŸ“Š Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø­Ù…Ù„Ø©:', chartData);
    
    // Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø£Ù„ÙˆØ§Ù†
    const colors = {
        primary: '#ff0033',
        secondary: '#ff6666', 
        success: '#28a745',
        info: '#17a2b8',
        warning: '#ffc107',
        danger: '#dc3545',
        dark: '#343a40',
        gradient: ['#ff0033', '#ff6666', '#28a745', '#17a2b8', '#ffc107', '#dc3545']
    };
    
    // Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø¹Ø§Ù…Ø© Ù„Ù„Ø±Ø³ÙˆÙ… Ø§Ù„Ø¨ÙŠØ§Ù†ÙŠØ©
    const commonOptions = {
        responsive: true,
        maintainAspectRatio: false,
        plugins: {
            legend: {
                labels: { color: '#fff', font: { size: 12 } }
            }
        },
        scales: {
            x: {
                ticks: { color: '#ccc' },
                grid: { color: '#333' }
            },
            y: {
                ticks: { color: '#ccc' },
                grid: { color: '#333' }
            }
        }
    };
    
    // 1. Ø±Ø³Ù… Ø¨ÙŠØ§Ù†ÙŠ Ù„Ù„Ø¥ÙŠØ±Ø§Ø¯Ø§Øª Ø§Ù„Ø´Ù‡Ø±ÙŠØ©
    new Chart(document.getElementById('monthlyRevenueChart'), {
        type: 'line',
        data: {
            labels: chartData.monthly_labels,
            datasets: [{
                label: 'Ø§Ù„Ø¥ÙŠØ±Ø§Ø¯Ø§Øª (Ø±.Ø³)',
                data: chartData.monthly_revenue,
                borderColor: colors.primary,
                backgroundColor: colors.primary + '20',
                borderWidth: 3,
                fill: true,
                tension: 0.4
            }]
        },
        options: commonOptions
    });
    
    // 2. Ø±Ø³Ù… Ø¨ÙŠØ§Ù†ÙŠ Ù„Ù„Ø·Ù„Ø¨Ø§Øª Ø§Ù„ÙŠÙˆÙ…ÙŠØ©
    new Chart(document.getElementById('dailyOrdersChart'), {
        type: 'bar',
        data: {
            labels: chartData.daily_labels,
            datasets: [{
                label: 'Ø¹Ø¯Ø¯ Ø§Ù„Ø·Ù„Ø¨Ø§Øª',
                data: chartData.daily_orders,
                backgroundColor: colors.info,
                borderColor: colors.info,
                borderWidth: 1
            }]
        },
        options: commonOptions
    });
    
    // 3. Ø±Ø³Ù… Ø¨ÙŠØ§Ù†ÙŠ Ø£ÙØ¶Ù„ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª
    new Chart(document.getElementById('topProductsChart'), {
        type: 'horizontalBar',
        data: {
            labels: chartData.products_labels,
            datasets: [{
                label: 'Ø¹Ø¯Ø¯ Ø§Ù„Ù…Ø¨ÙŠØ¹Ø§Øª',
                data: chartData.products_sales,
                backgroundColor: colors.gradient,
                borderColor: colors.primary,
                borderWidth: 1
            }]
        },
        options: {
            ...commonOptions,
            indexAxis: 'y'
        }
    });
    
    // 4. Ø±Ø³Ù… Ø¨ÙŠØ§Ù†ÙŠ Ø£Ù†ÙˆØ§Ø¹ Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡
    new Chart(document.getElementById('customerTypesChart'), {
        type: 'bar',
        data: {
            labels: chartData.customer_types_labels,
            datasets: [
                {
                    label: 'Ø§Ù„Ø¥ÙŠØ±Ø§Ø¯Ø§Øª (Ø±.Ø³)',
                    data: chartData.customer_types_revenue,
                    backgroundColor: colors.success + '80',
                    borderColor: colors.success,
                    borderWidth: 2,
                    yAxisID: 'y'
                },
                {
                    label: 'Ø¹Ø¯Ø¯ Ø§Ù„Ø·Ù„Ø¨Ø§Øª',
                    data: chartData.customer_types_orders,
                    backgroundColor: colors.warning + '80',
                    borderColor: colors.warning,
                    borderWidth: 2,
                    yAxisID: 'y1'
                }
            ]
        },
        options: {
            ...commonOptions,
            scales: {
                ...commonOptions.scales,
                y1: {
                    type: 'linear',
                    display: true,
                    position: 'right',
                    ticks: { color: '#ccc' },
                    grid: { drawOnChartArea: false, color: '#333' }
                }
            }
        }
    });
    
    // 5. Ø±Ø³Ù… Ø¨ÙŠØ§Ù†ÙŠ Ø§Ù„ÙØ¦Ø§Øª
    new Chart(document.getElementById('categoriesChart'), {
        type: 'doughnut',
        data: {
            labels: chartData.categories_labels,
            datasets: [{
                data: chartData.categories_revenue,
                backgroundColor: colors.gradient,
                borderColor: '#333',
                borderWidth: 2
            }]
        },
        options: {
            responsive: true,
            maintainAspectRatio: false,
            plugins: {
                legend: {
                    position: 'bottom',
                    labels: { color: '#fff', padding: 20 }
                }
            }
        }
    });
    
    // 6. Ø±Ø³Ù… Ø¨ÙŠØ§Ù†ÙŠ Ø¨ÙˆØ§Ø¨Ø§Øª Ø§Ù„Ø¯ÙØ¹
    new Chart(document.getElementById('paymentGatewaysChart'), {
        type: 'pie',
        data: {
            labels: chartData.gateways_labels,
            datasets: [{
                data: chartData.gateways_revenue,
                backgroundColor: colors.gradient,
                borderColor: '#333',
                borderWidth: 2
            }]
        },
        options: {
            responsive: true,
            maintainAspectRatio: false,
            plugins: {
                legend: {
                    position: 'bottom',
                    labels: { color: '#fff', padding: 15 }
                }
            }
        }
    });
    
    // 7. Ø±Ø³Ù… Ø¨ÙŠØ§Ù†ÙŠ Ø­Ø§Ù„Ø§Øª KYC
    new Chart(document.getElementById('kycStatusChart'), {
        type: 'doughnut',
        data: {
            labels: chartData.kyc_labels,
            datasets: [{
                data: chartData.kyc_data,
                backgroundColor: [colors.warning, colors.success, colors.danger],
                borderColor: '#333',
                borderWidth: 1
            }]
        },
        options: {
            responsive: true,
            maintainAspectRatio: false,
            plugins: {
                legend: {
                    position: 'bottom',
                    labels: { color: '#fff', font: { size: 10 } }
                }
            }
        }
    });
    
    // 8. Ø±Ø³Ù… Ø¨ÙŠØ§Ù†ÙŠ Ø­Ø§Ù„Ø© Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª
    new Chart(document.getElementById('productsStatusChart'), {
        type: 'doughnut',
        data: {
            labels: chartData.products_status_labels,
            datasets: [{
                data: chartData.products_status_data,
                backgroundColor: [colors.success, colors.danger],
                borderColor: '#333',
                borderWidth: 1
            }]
        },
        options: {
            responsive: true,
            maintainAspectRatio: false,
            plugins: {
                legend: {
                    position: 'bottom',
                    labels: { color: '#fff', font: { size: 10 } }
                }
            }
        }
    });
    
    // 9. Ø±Ø³Ù… Ø¨ÙŠØ§Ù†ÙŠ Ø§Ù„Ø£ÙƒÙˆØ§Ø¯
    new Chart(document.getElementById('codesStatusChart'), {
        type: 'doughnut',
        data: {
            labels: chartData.codes_labels,
            datasets: [{
                data: chartData.codes_data,
                backgroundColor: [colors.info, colors.secondary],
                borderColor: '#333',
                borderWidth: 1
            }]
        },
        options: {
            responsive: true,
            maintainAspectRatio: false,
            plugins: {
                legend: {
                    position: 'bottom',
                    labels: { color: '#fff', font: { size: 10 } }
                }
            }
        }
    });
    
    console.log('âœ… ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø±Ø³ÙˆÙ… Ø§Ù„Ø¨ÙŠØ§Ù†ÙŠØ© Ø¨Ù†Ø¬Ø§Ø­!');
});

// ÙˆØ¸Ø§Ø¦Ù Ø§Ù„ØªØµØ¯ÙŠØ±
function exportToPDF() {
    const btn = event.target;
    const originalText = btn.innerHTML;
    btn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØµØ¯ÙŠØ±...';
    btn.disabled = true;
    
    // Ù…Ø­Ø§ÙƒØ§Ø© Ø§Ù„ØªØµØ¯ÙŠØ±
    setTimeout(() => {
        btn.innerHTML = originalText;
        btn.disabled = false;
        alert('ØªÙ… ØªØµØ¯ÙŠØ± ØªÙ‚Ø±ÙŠØ± PDF Ø¨Ù†Ø¬Ø§Ø­!');
    }, 2000);
}

function exportToExcel() {
    const btn = event.target;
    const originalText = btn.innerHTML;
    btn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØµØ¯ÙŠØ±...';
    btn.disabled = true;
    
    // Ù…Ø­Ø§ÙƒØ§Ø© Ø§Ù„ØªØµØ¯ÙŠØ±
    setTimeout(() => {
        btn.innerHTML = originalText;
        btn.disabled = false;
        alert('ØªÙ… ØªØµØ¯ÙŠØ± ØªÙ‚Ø±ÙŠØ± Excel Ø¨Ù†Ø¬Ø§Ø­!');
    }, 2000);
}

function printReport() {
    window.print();
}

// ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª ÙƒÙ„ 5 Ø¯Ù‚Ø§Ø¦Ù‚
setInterval(() => {
    console.log('ğŸ”„ ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª...');
    location.reload();
}, 300000);
</script>
{% endblock %}

{% block styles %}
{{ super() }}
<style>
/* ØªØ­Ø³ÙŠÙ†Ø§Øª Ø§Ù„Ø±Ø³ÙˆÙ… Ø§Ù„Ø¨ÙŠØ§Ù†ÙŠØ© */
.chart-container {
    background: #1a1a1a;
    border-radius: 15px;
    padding: 25px;
    border: 1px solid #333;
    height: 400px;
    position: relative;
    transition: all 0.3s ease;
}

.chart-container:hover {
    border-color: #ff0033;
    box-shadow: 0 5px 20px rgba(255, 0, 51, 0.2);
}

.chart-container-small {
    background: #1a1a1a;
    border-radius: 12px;
    padding: 20px;
    border: 1px solid #333;
    height: 300px;
    position: relative;
}

.chart-title {
    color: #ff0033;
    font-size: 16px;
    font-weight: bold;
    margin-bottom: 20px;
    text-align: center;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 10px;
}

.chart-title-small {
    color: #ff0033;
    font-size: 14px;
    font-weight: bold;
    margin-bottom: 15px;
    text-align: center;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 8px;
}

/* ØªØ­Ø³ÙŠÙ† Ø§Ù„Ø¨Ø·Ø§Ù‚Ø§Øª Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ© */
.stat-card {
    position: relative;
    overflow: hidden;
}

.stat-growth {
    position: absolute;
    top: 10px;
    right: 10px;
    background: rgba(40, 167, 69, 0.2);
    color: #28a745;
    padding: 4px 8px;
    border-radius: 12px;
    font-size: 0.8em;
    font-weight: bold;
}

.stat-subtext {
    font-size: 0.8em;
    color: #ccc;
    margin-top: 5px;
}

/* ØªØ­Ø³ÙŠÙ† Ø§Ù„Ø¬Ø¯Ø§ÙˆÙ„ */
.rank-badge {
    display: inline-block;
    width: 30px;
    height: 30px;
    border-radius: 50%;
    color: white;
    text-align: center;
    line-height: 30px;
    font-weight: bold;
    font-size: 0.9em;
}

.rank-1 { background: linear-gradient(135deg, #ffd700, #ffb347); }
.rank-2 { background: linear-gradient(135deg, #c0c0c0, #a8a8a8); }
.rank-3 { background: linear-gradient(135deg, #cd7f32, #b8860b); }
.rank-badge:not(.rank-1):not(.rank-2):not(.rank-3) {
    background: linear-gradient(135deg, #666, #888);
}

/* Ø¨Ø·Ø§Ù‚Ø§Øª Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø§Ù„Ù†Ø¸Ø§Ù… */
.system-stats-card {
    background: #2a2a2a;
    border-radius: 12px;
    padding: 20px;
    border: 1px solid #333;
    transition: all 0.3s ease;
}

.system-stats-card:hover {
    border-color: #ff0033;
    transform: translateY(-5px);
    box-shadow: 0 5px 15px rgba(255, 0, 51, 0.1);
}

.system-stats-card h4 {
    color: #ff0033;
    margin-bottom: 15px;
    font-size: 16px;
    display: flex;
    align-items: center;
    gap: 10px;
}

.system-stats-card ul {
    list-style: none;
    padding: 0;
    margin: 0;
}

.system-stats-card li {
    color: #ccc;
    padding: 8px 0;
    border-bottom: 1px solid #333;
    font-size: 0.9em;
}

.system-stats-card li:last-child {
    border-bottom: none;
}

/* ØªØ­Ø³ÙŠÙ†Ø§Øª Ù„Ù„ØªØ¬Ø§ÙˆØ¨ */
@media (max-width: 1200px) {
    .chart-container {
        height: 350px;
    }
    
    .system-stats-card {
        margin-bottom: 20px;
    }
}

@media (max-width: 768px) {
    .chart-container,
    .chart-container-small {
        height: 300px;
        padding: 15px;
    }
    
    .chart-title {
        font-size: 14px;
    }
    
    .system-stats-card {
        padding: 15px;
    }
}

/* ØªØ£Ø«ÙŠØ±Ø§Øª ØªØ­Ù…ÙŠÙ„ */
.chart-container::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: linear-gradient(90deg, transparent, rgba(255, 0, 51, 0.1), transparent);
    transform: translateX(-100%);
    animation: shimmer 2s infinite;
    pointer-events: none;
}

@keyframes shimmer {
    0% { transform: translateX(-100%); }
    100% { transform: translateX(100%); }
}
</style>
{% endblock %}