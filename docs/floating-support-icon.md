# أيقونة الدعم الفني العائمة - Es-Gift

## 📋 نظرة عامة
أيقونة دعم فني عائمة ومتحركة تظهر في صفحات محددة من موقع Es-Gift وتوفر وسيلة سهلة وسريعة للتواصل مع فريق الدعم الفني.

## ✨ المميزات

### 🎨 التصميم والحركة
- **تصميم عائم**: تتحرك في مواضع مختلفة على الشاشة
- **تأثيرات بصرية**: انتقالات سلسة وتأثيرات hover متقدمة
- **تصميم متجاوب**: يتكيف مع جميع أحجام الشاشات
- **حركة ذكية**: تغير موقعها كل 8-12 ثانية بشكل عشوائي

### 🎯 التفاعل الذكي
- **إشعارات تفاعلية**: تظهر إشعارات لجذب الانتباه
- **جذب انتباه تلقائي**: تنبه المستخدم إذا لم يتفاعل لفترة طويلة
- **رسائل ديناميكية**: تغير النص المساعد حسب الحالة
- **تأثيرات صوتية**: أصوات خفيفة عند التفاعل (اختيارية)

### 🔧 التكامل
- **Tawk.to**: تكامل مع نظام الشات المباشر
- **WhatsApp**: رابط احتياطي للتواصل عبر واتساب
- **معلومات السياق**: ترسل معلومات الصفحة والمستخدم تلقائياً
- **تتبع التحليلات**: تسجل أحداث التفاعل لـ Google Analytics

## 📁 الملفات المطلوبة

### CSS
```
static/css/floating-support.css
```

### JavaScript  
```
static/js/floating-support.js
```

## 🎯 الصفحات المفعلة
الأيقونة تظهر فقط في الصفحات التالية:
- **الصفحة الرئيسية** (`index.html`)
- **الملف الشخصي** (`profile.html`) 
- **السلة** (`cart.html`)

## 🛠 التثبيت والإعداد

### 1. إضافة الملفات
تأكد من وجود الملفات في المسارات الصحيحة:
- `static/css/floating-support.css`
- `static/js/floating-support.js`

### 2. تحديث القوالب (Templates)
أضف الكود التالي لكل صفحة من الصفحات المطلوبة:

#### في `{% block extra_css %}`
```django
<link rel="stylesheet" href="{{ url_for('static', filename='css/floating-support.css') }}">
```

#### في `{% block extra_js %}`
```django
<script src="{{ url_for('static', filename='js/floating-support.js') }}"></script>
<script>
// تمرير بيانات المستخدم للدعم الفني
window.currentUserData = {
    name: '{{ current_user.full_name or current_user.username }}',
    email: '{{ current_user.email }}',
    type: '{{ current_user.customer_type }}'
};
</script>
```

### 3. إعداد أرقام التواصل
في ملف `floating-support.js`، قم بتحديث رقم WhatsApp:
```javascript
const whatsappUrl = `https://wa.me/966123456789?text=${encodeURIComponent(message)}`;
```

## ⚙️ خيارات التخصيص

### تغيير الألوان
في `floating-support.css`:
```css
.floating-support-icon {
    background: linear-gradient(135deg, #ff0033 0%, #cc0027 100%);
}
```

### تعديل مواضع الحركة
في `floating-support.js`:
```javascript
const positions = [
    { bottom: '20px', right: '20px' },
    { bottom: '80px', right: '30px' },
    // أضف المواضع المطلوبة
];
```

### تعديل توقيت الحركة
```javascript
// تغيير الموقع كل 8-12 ثانية
let moveInterval = setInterval(() => {
    this.changePosition();
}, 8000 + Math.random() * 4000);
```

## 📱 الاستجابة (Responsive)

### الشاشات الصغيرة (≤ 768px)
- حجم الأيقونة: 50x50px
- خط: 20px
- نص مساعد مصغر

### الشاشات الصغيرة جداً (≤ 480px)  
- حجم الأيقونة: 45x45px
- خط: 18px
- إخفاء النص المساعد

### الشاشات الكبيرة (≥ 1200px)
- حجم الأيقونة: 70x70px  
- خط: 28px
- نص مساعد كبير

## 🔧 الوظائف المتقدمة

### جذب الانتباه التلقائي
تظهر تنبيهات إذا لم يتفاعل المستخدم:
- بعد 30 ثانية: تنبيه أول
- بعد دقيقة من التفاعل: تنبيه ثانوي

### إرسال معلومات السياق
عند فتح المحادثة، يتم إرسال:
- اسم المستخدم والبريد الإلكتروني
- الصفحة الحالية
- معلومات السلة (في صفحة السلة)
- الوقت والتاريخ

### دعم إمكانية الوصول
- **لوحة المفاتيح**: Enter أو Space للتفعيل
- **قارئ الشاشة**: نصوص وصفية مناسبة
- **تباين عالي**: ألوان واضحة ومتباينة

## 🎛 إعدادات متقدمة

### تخصيص الرسائل
```javascript
// رسالة WhatsApp مخصصة
generateWhatsAppMessage() {
    let message = `السلام عليكم، أحتاج مساعدة في Es-Gift\n`;
    // أضف التخصيصات المطلوبة
    return message;
}
```

### إضافة صفحات جديدة
في `getCurrentPage()`:
```javascript
getCurrentPage() {
    const path = window.location.pathname;
    if (path.includes('new-page')) {
        return 'new-page';
    }
    // أضف الصفحات الجديدة
}
```

ثم أضف في `allowedPages`:
```javascript
this.allowedPages = ['profile', 'index', 'cart', 'new-page'];
```

## 🐛 استكشاف الأخطاء

### الأيقونة لا تظهر
1. تأكد من إضافة CSS و JS في القالب
2. تحقق من مسار الملفات
3. تأكد أن الصفحة في القائمة المسموحة

### لا تعمل مع Tawk.to
1. تأكد من تحميل Tawk.to بشكل صحيح
2. تحقق من وجود `Tawk_API` في console
3. استخدم WhatsApp كبديل

### مشاكل في الحركة
1. تحقق من وجود أخطاء في console
2. تأكد من عدم تداخل CSS مع عناصر أخرى
3. تحقق من قيم z-index

## 📊 تتبع الأداء

### أحداث Google Analytics
- `support_click`: نقر على الأيقونة
- `chat_started`: بداية محادثة جديدة

### معلومات التتبع
- نوع المستخدم
- الصفحة الحالية  
- وقت التفاعل

## 🔄 التحديثات المستقبلية

### ميزات مقترحة
- [ ] إضافة المزيد من التأثيرات البصرية
- [ ] تكامل مع أنظمة دردشة أخرى
- [ ] إعدادات مخصصة لكل مستخدم
- [ ] تحليلات متقدمة للاستخدام

---

## 🚀 المطور
تم تطوير هذه الأيقونة بواسطة فريق Es-Gift Development Team

## 📄 الرخصة  
هذا المشروع جزء من منصة Es-Gift ومخصص للاستخدام الداخلي فقط.
